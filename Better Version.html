<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Oracle's Veil - Tarot Reader</title>
    <style>
        /* --- General Styles & Fonts --- */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400&display=swap');

        :root {
            --font-main: 'Cinzel', serif;
            --font-body: 'Lato', sans-serif;
            --color-bg-start: #232526;
            --color-bg-end: #414345;
            --color-text: #EAEAEA;
            --color-primary: #D4AF37; /* Gold */
            --color-secondary: #E67E22; /* Orange */
            --color-surface: #1E1E1E;
            --color-blunt-gold: #e6c56d;
            --color-blunt-dark: #f09d51;
        }

        body {
            background: linear-gradient(to right, var(--color-bg-start), var(--color-bg-end));
            color: var(--color-text);
            font-family: var(--font-body);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 900px;
            margin: auto;
        }

        /* --- Deck Selection Screen --- */
        #deck-selection-screen {
            text-align: center;
            animation: fadeInScreen 0.8s ease-in-out;
        }

        #deck-selection-screen h1 {
            font-family: var(--font-main);
            font-weight: 700;
            font-size: clamp(2rem, 5vw, 2.5rem);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        #deck-selection-screen p {
            font-size: clamp(1rem, 3vw, 1.1rem);
            font-weight: 300;
            margin-bottom: 40px;
        }

        .deck-choices {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }

        .deck-card {
            background-color: var(--color-surface);
            border: 2px solid var(--color-surface);
            width: 250px;
            height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
            padding: 20px;
            border-radius: 12px;
        }

        .deck-card:hover {
            transform: translateY(-10px) scale(1.02);
        }

        .deck-card h2 {
            font-family: var(--font-main);
            font-size: 1.5rem;
            margin-bottom: 15px;
        }
        
        .deck-card .description {
            font-size: 0.9rem;
            text-align: center;
            font-weight: 300;
            line-height: 1.5;
        }

        #gold-foil-deck {
            border-color: var(--color-primary);
        }
        #gold-foil-deck:hover {
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.3);
        }
        #gold-foil-deck h2 { color: var(--color-primary); }

        #dark-tarot-deck {
            border-color: var(--color-secondary);
        }
        #dark-tarot-deck:hover {
            box-shadow: 0 0 25px rgba(230, 126, 34, 0.3);
        }
        #dark-tarot-deck h2 { color: var(--color-secondary); }

        /* --- Reading Chamber Screen --- */
        #reading-chamber-screen {
            display: none; /* Initially hidden */
            animation: fadeInScreen 0.8s ease-in-out;
        }

        #card-display {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            min-height: 250px;
            flex-wrap: wrap;
            perspective: 1000px;
        }

        .tarot-card-container {
            width: 150px; /* Adjusted for more cards */
            height: 230px; /* Adjusted for more cards */
            opacity: 0;
            animation: fadeInCard 0.6s forwards;
        }

        .tarot-card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .tarot-card-container.flipped .tarot-card {
            transform: rotateY(180deg);
        }
        
        .tarot-card-container.reversed .card-visual {
            transform: rotate(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            text-align: center;
            padding: 10px;
            border-radius: 10px;
            box-sizing: border-box;
        }

        .card-face-back {
            background-color: var(--color-surface);
        }
        .card-face-back.gold-foil { border: 2px solid var(--color-primary); }
        .card-face-back.dark-tarot { border: 2px solid var(--color-secondary); }
        
        .card-face-front {
            background-color: #2c2c2c;
            transform: rotateY(180deg);
        }
        .card-face-front.gold-foil { border: 1px solid var(--color-primary); }
        .card-face-front.dark-tarot { border: 1px solid var(--color-secondary); }


        .card-name {
            font-family: var(--font-main);
            font-weight: 700;
            font-size: 0.9rem;
            line-height: 1.1;
        }

        .card-visual {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 5px 0;
            transition: transform 0.5s ease-in-out;
        }
        
        .card-visual svg {
            width: 80%;
            height: auto;
        }

        .card-position {
            font-size: 0.75rem;
            font-style: italic;
            color: #ccc;
        }

        @keyframes fadeInScreen { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInCard { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        #interpretation-area, #final-message-area {
            background-color: var(--color-surface);
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            min-height: 50px;
        }
        
        #final-message-area {
            border-top: 2px solid var(--color-primary);
        }

        #final-message-area h3 {
             font-family: var(--font-main);
            margin-top: 0;
            text-align: center;
        }

        #interpretation-area h3 {
            font-family: var(--font-main);
            margin-top: 0;
            text-align: center;
            letter-spacing: 1px;
        }

        #interpretation-text p, #final-blunt-message {
            line-height: 1.6;
            margin-bottom: 1.5em;
            padding-bottom: 1.5em;
            border-bottom: 1px solid #333;
        }
        #interpretation-text p:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        #interpretation-text strong, #final-message-area strong {
            font-family: var(--font-main);
            font-weight: 700;
        }

        .blunt-advice {
            display: block;
            margin-top: 1em;
            padding: 10px;
            border-radius: 4px;
            font-style: italic;
        }
        
        .blunt-advice.gold-foil {
            background-color: rgba(212, 175, 55, 0.1);
            border-left: 3px solid var(--color-blunt-gold);
        }
        
        .blunt-advice.dark-tarot {
             background-color: rgba(230, 126, 34, 0.1);
             border-left: 3px solid var(--color-blunt-dark);
        }

        .blunt-advice strong {
            color: var(--color-text);
        }

        #chat-interface {
            margin-top: 20px;
        }

        #chat-log {
            height: 200px;
            overflow-y: auto;
            background: rgba(0,0,0,0.25);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #333;
        }
        
        #chat-log::-webkit-scrollbar { width: 6px; }
        #chat-log::-webkit-scrollbar-thumb { background: #555; border-radius: 3px; }

        .chat-message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        .user-message { 
            background-color: #2c3e50;
            color: var(--color-text);
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }
        .oracle-message { 
            background-color: var(--color-surface);
            border: 1px solid #444;
            margin-right: auto;
            border-bottom-left-radius: 4px;
        }


        #chat-form {
            display: flex;
        }

        #user-input {
            flex-grow: 1;
            background-color: var(--color-surface);
            border: 1px solid #444;
            color: var(--color-text);
            padding: 12px;
            border-radius: 20px 0 0 20px;
            font-size: 1rem;
        }
        
        #user-input:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        #submit-button {
            background-color: var(--color-primary);
            border: none;
            color: var(--color-bg-start);
            padding: 0 25px;
            font-size: 1rem;
            font-family: var(--font-main);
            font-weight: 700;
            cursor: pointer;
            border-radius: 0 20px 20px 0;
            transition: background-color 0.3s;
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- Screen 1: Deck Selection -->
        <div id="deck-selection-screen">
            <h1>The Oracle's Veil</h1>
            <p>Focus your mind. Choose the deck that calls to you.</p>
            <div class="deck-choices">
                <div class="deck-card" id="gold-foil-deck" onclick="selectDeck('goldFoil')">
                    <h2>Greco-Roman Tarot</h2>
                    <p class="description">Draw wisdom from the pantheon. Guidance from gods and goddesses for your modern odyssey.</p>
                </div>
                <div class="deck-card" id="dark-tarot-deck" onclick="selectDeck('darkTarot')">
                    <h2>Demonic Tarot</h2>
                    <p class="description">Confront the darkness within. Unflinching advice from the spirits and demons of the underworld.</p>
                </div>
            </div>
        </div>

        <!-- Screen 2: Reading Chamber -->
        <div id="reading-chamber-screen">
            <div id="card-display"></div>
            <div id="interpretation-area">
                <h3 id="spread-name"></h3>
                <div id="interpretation-text"></div>
            </div>
            <div id="final-message-area" style="display: none;">
                <h3>The Final Word</h3>
                <div id="final-blunt-message"></div>
            </div>
            <div id="chat-interface">
                <div id="chat-log"></div>
                <form id="chat-form">
                    <input type="text" id="user-input" placeholder="Ask your question..." autocomplete="off">
                    <button type="submit" id="submit-button">Ask</button>
                </form>
            </div>
        </div>
    </div>

    <script>
    // --- DATABASE OF TAROT CARDS AND INTERPRETATIONS (UPDATED) ---
    const fullDeckData = {
        major: [
            { name: "The Fool", svg: `<path d="M12 10 C15 10 15 5 10 2 C5 5 5 10 8 10 M10 12 v 6 M 8 14 h 4"/>`, meanings: { upright: "New beginnings, innocence, spontaneity, a leap of faith, originality, optimism, embracing the unknown, exciting adventures, boundless potential. It encourages listening to intuition and taking risks for growth.", reversed: "Naivety, foolishness, recklessness, being taken advantage of, fear of the unknown, poor judgment, hesitation, holding back due to others' opinions or unrealistic expectations. It advises caution in decision-making and finding balance between spontaneity and responsibility.", blunt: "This is about the start of a journey and trusting the universe. Stop holding back out of fear, take that leap of faith, but don't be so naive as to ignore the potential pitfalls. It’s a call to balance your optimism with a dose of reality." }},
            { name: "The Magician", svg: `<path d="M10 2 L10 18 M10 2 L6 6 M10 2 l4 4 M6 14 l4 4 l4 -4"/>`, meanings: { upright: "Manifestation, willpower, skill, resourcefulness, power, action, having all necessary resources (inner and outer), transforming ideas into reality.", reversed: "Manipulation, deception, untapped potential, poor planning, lack of willpower, unfocused energy, illusion, trickery.", blunt: "You have all the resources and personal power you need to create your desired reality. Stop planning and start doing. If reversed, stop trying to trick others or yourself; your potential is being wasted on cheap illusions." }},
            { name: "The High Priestess", svg: `<path d="M10 18 A 6 6 0 0 0 10 6 A 6 6 0 0 0 10 18 M10 6 L10 2 M7 4 h6"/>`, meanings: { upright: "Intuition, subconscious wisdom, mystery, secrets, higher knowledge, divine feminine, patience, looking inward for answers.", reversed: "Repressed intuition, hidden motives, superficiality, confusion, cognitive dissonance, secrets revealed inappropriately, ignoring inner voice.", blunt: "The answer isn't in the outside world. It's hidden within your subconscious. Be patient, look inward, and trust the wisdom you find there. Stop ignoring your gut feelings." }},
            { name: "The Empress", svg: `<path d="M10 2 a4 4 0 00-4 4 v8 a4 4 0 008 0 V6 a4 4 0 00-4-4z M10 10 m-2 0 a2 2 0 114 0 2 2 0 11-4 0"/>`, meanings: { upright: "Nurturing, fertility, abundance, creativity, sensuality, beauty, Mother Earth, unconditional love, comfort, security.", reversed: "Creative blocks, dependence, smothering, neglect, insecurity, possessiveness, laziness, excess, disharmony in relationships.", blunt: "This is about creation, nurturing, and connecting with your senses. Whether it's a project or a person, it needs your loving care to flourish. If reversed, you're either smothering it or neglecting it entirely. Find balance." }},
            { name: "The Emperor", svg: `<path d="M10 2 L 7 9 h 6 L 10 2 M 9 9 L 6 18 M 11 9 L 14 18"/>`, meanings: { upright: "Authority, structure, stability, leadership, control, discipline, order, father figure, establishment of rules and systems.", reversed: "Tyranny, rigidity, lack of control, abuse of power, weakness, inflexibility, domineering behavior, unresolved father issues.", blunt: "It's time to establish order and structure. Be the leader, use logic, and create a solid foundation. If you're being tyrannical or inflexible, you've lost control. True power is disciplined, not domineering." }},
            { name: "The Hierophant", svg: `<path d="M10 2v16 M4 9h12 M4 13h12"/>`, meanings: { upright: "Tradition, convention, conformity, institutions (religious, educational), spiritual guidance from established sources, mentorship, shared values, marriage.", reversed: "Rebellion against tradition, non-conformity, challenging established norms, personal belief systems, spiritual crisis, outdated beliefs, abuse of spiritual authority, lack of structure.", blunt: "This isn't the time to be a rebel. Learn from established traditions or a trusted mentor. If reversed, it's time to question those very traditions and forge your own path, but don't do it just for the sake of rebellion." }},
            { name: "The Lovers", svg: `<path d="M10 4L4 10h12L10 4z M4 12v6h5 M16 12v6h-5"/>`, meanings: { upright: "Love, relationships, partnership, choices (often significant life choices, especially in values or relationships), alignment, harmony, union of opposites, authentic connection.", reversed: "Disharmony, conflict, indecision, poor choices, misalignment of values, relationship difficulties, infidelity, betrayal.", blunt: "This is about a major choice, likely in love or values. You must align with your authentic self. A poor choice here leads to conflict and disharmony. Choose what's truly right for you, not just convenient." }},
            { name: "The Chariot", svg: `<path d="M4 4h12v6h-1.5l-2.5-4h-4l-2.5 4H4z M10 10v8m-4-2h8"/>`, meanings: { upright: "Willpower, determination, victory, control, ambition, self-discipline, focus, overcoming obstacles, successful journey or transition.", reversed: "Lack of direction, aggression, loss of control, obstacles, stagnation, scattered energy, lack of self-control, coercion.", blunt: "Achieve your goal through sheer determination and self-discipline. Master the conflicting forces pulling you apart and drive forward. If you lose control or direction, you will fail. Focus is everything." }},
            { name: "Strength", svg: `<path d="M6 3h8v2h-8z M8 5 C4 5, 4 12, 8 12h4c4 0, 4-7, 0-7 M10 12v6"/>`, meanings: { upright: "Inner strength, courage, patience, compassion, persuasion, influence, self-control, taming primal urges, grace under pressure.", reversed: "Weakness, self-doubt, lack of self-control, insecurity, raw or uncontrolled emotion, vulnerability, power struggles, impulsiveness.", blunt: "Your power comes from gentle compassion and inner fortitude, not aggression. Tame your primal instincts with patience and grace. If reversed, your self-doubt and lack of control are making you weak." }},
            { name: "The Hermit", svg: `<path d="M5 18V9a2 2 0 012-2h6a2 2 0 012 2v9M3 18h14M10 5a2 2 0 100-4 2 2 0 000 4z"/>`, meanings: { upright: "Introspection, soul-searching, solitude, wisdom, guidance (often inner), spiritual enlightenment, withdrawal from the world to seek truth.", reversed: "Isolation, loneliness, withdrawal due to fear, stubbornness, resisting guidance, becoming overly isolated, evading problems.", blunt: "Stop seeking answers from the outside world. Withdraw, be alone with your thoughts, and find the truth within. If reversed, you're not introspecting, you're just hiding from your problems." }},
            { name: "Wheel of Fortune", svg: `<circle cx="10" cy="10" r="8"/><path d="M10 2v16 M2 10h16"/>`, meanings: { upright: "Cycles, destiny, turning points, luck (often good), fate, change, karma, new opportunities, things happening as they are meant to.", reversed: "Bad luck, resisting change, negative cycles, unexpected setbacks, feeling out of control, end of bad luck, embracing change.", blunt: "Life's cycles are turning, and a major change is upon you, whether you like it or not. Don't resist it. Adapt to the new reality because you can't control the wheel." }},
            { name: "Justice", svg: `<path d="M2 8h16 M10 2v16 M4 12l6-4 6 4"/>`, meanings: { upright: "Fairness, truth, cause and effect, law, clarity, accountability, balance, integrity, making fair decisions, facing consequences.", reversed: "Injustice, dishonesty, lack of accountability, bias, unfairness, legal disputes unresolved, avoiding responsibility, unethical behavior.", blunt: "The truth is coming out, and you will face the consequences of your actions, for better or worse. It's time for accountability and fairness. Lying or avoiding responsibility now will only make it worse." }},
            { name: "The Hanged Man", svg: `<path d="M10 18v-8M5 10h10M10 10L6 4M10 10l4-4"/>`, meanings: { upright: "Suspension, new perspective, surrender, sacrifice (often voluntary), letting go, pause, waiting, reflection, enlightenment through stillness.", reversed: "Stalling, resistance to change, needless sacrifice, indecision, avoiding reality, martyrdom, feeling stuck, period of waiting is over.", blunt: "You're stuck because you're refusing to see things differently. Surrender your ego, let go of control, and gain a new perspective. The waiting will be worth it if you actually learn something." }},
            { name: "Death", svg: `<path d="M2 18l16-16M18 18L2 2"/>`, meanings: { upright: "Endings, transformation, transition, letting go, new beginnings, closure, profound change, release, mortality. Rarely signifies literal physical death; more often metaphorical.", reversed: "Resisting change, fear of endings, stagnation, holding on to the past, inertia, hope destroyed, inner purging, self-sabotage.", blunt: "It's over. This is a profound and necessary ending. Resisting it will only prolong the pain and prevent new growth. Let it die so something new can be born." }},
            { name: "Temperance", svg: `<path d="M4 4l8 8 8-8 M4 16h16"/>`, meanings: { upright: "Balance, moderation, patience, purpose, alchemy, harmony, blending, compromise, finding the middle ground, healing.", reversed: "Imbalance, excess, extremes, lack of patience, discord, recklessness, hastiness, resistance to change, impulsiveness.", blunt: "Find the middle ground. Your life is out of balance, and you're dealing in extremes. Blend opposing forces, be patient, and seek harmony. Recklessness and excess will lead to failure." }},
            { name: "The Devil", svg: `<path d="M5 10a5 5 0 0010 0M8 2l4 4M12 2l-4 4"/>`, meanings: { upright: "Bondage, addiction, materialism, temptation, shadow self, negative patterns, illusion, restriction, lust, control, unhealthy attachments.", reversed: "Breaking free from restrictions, detachment, reclaiming power, enlightenment, releasing addictions, confronting shadow self, inner strength.", blunt: "You are trapped in a prison of your own making, chained by your addictions and negative patterns. Stop pretending you're a victim. You have the key to your own freedom, but first, you must confront your shadow self." }},
            { name: "The Tower", svg: `<path d="M6 18V6h8v12H6z M4 6h12M8 2l-3 4h8l-3-4"/>`, meanings: { upright: "Sudden upheaval, crisis, revelation, destruction of false structures, awakening, sudden and unexpected change, ego death, truth revealed.", reversed: "Avoiding disaster (often by resisting necessary change), fear of unknown, delaying the inevitable, internal crisis, averting catastrophe but potentially missing a lesson.", blunt: "Everything you built on a weak or false foundation is about to be destroyed. It will be a sudden, chaotic crisis, but it's necessary to clear the way for truth. Don't try to save the crumbling tower." }},
            { name: "The Star", svg: `<path d="M10 2l2 6h6l-5 4 2 6-5-4-5 4 2-6-5-4h6z"/>`, meanings: { upright: "Hope, inspiration, faith, serenity, healing, spiritual guidance, renewal, calm after the storm, authenticity, optimism.", reversed: "Despair, lack of faith, discouragement, pessimism, test of faith, feeling uninspired or hopeless.", blunt: "After the chaos of the Tower, this is your moment of healing and renewed hope. You are being guided toward peace and inspiration. Have faith and follow that light. Don't give in to despair." }},
            { name: "The Moon", svg: `<path d="M16 14A6 6 0 0110 18a6 6 0 110-12"/>`, meanings: { upright: "Illusion, fear, anxiety, subconscious, intuition, dreams, uncertainty, hidden things, deception, trusting instincts.", reversed: "Release of fear, confusion clearing, repressed emotion surfacing, self-deception revealed, clarity emerging, gaining insight.", blunt: "Things are not what they seem. You are navigating a path of illusion, anxiety, and hidden fears. Trust your deep intuition, not your eyes. What emerges from the subconscious must be faced." }},
            { name: "The Sun", svg: `<circle cx="10" cy="10" r="4" /><path d="M10 2V0M10 18v2M18 10h2M0 10h2M15.6 4.4l1.4-1.4M3 17l1.4-1.4M4.4 4.4L3 3M17 17l-1.4-1.4"/>`, meanings: { upright: "Joy, success, vitality, optimism, enlightenment, positivity, clarity, happiness, abundance, confidence, childlike innocence.", reversed: "Lack of enthusiasm, pessimism, clouded judgment, unrealistic expectations, setbacks, difficulty finding positivity, overconfidence, ego issues.", blunt: "This is a card of pure joy, success, and clarity. Everything is illuminated. Stop worrying, embrace the positivity with confidence, and enjoy your success. It's that simple." }},
            { name: "Judgement", svg: `<path d="M4 12h12v6H4z M10 12V4 M7 4h6"/>`, meanings: { upright: "Reckoning, awakening, rebirth, inner calling, absolution, self-evaluation, making important life-altering decisions, redemption, transition, spiritual awakening.", reversed: "Self-doubt, ignoring the call, fear of change, stagnation, poor logic, missed opportunities, being overly critical, refusal to learn karmic lessons.", blunt: "This is a call to awaken. You must make a final judgment on your past, forgive yourself, and be reborn. A major life-altering decision is here. Ignoring this call leads to stagnation." }},
            { name: "The World", svg: `<circle cx="10" cy="10" r="8"/><rect x="8" y="8" width="4" height="4"/>`, meanings: { upright: "Completion, integration, accomplishment, travel (often global), wholeness, success, fulfillment, belonging, end of a cycle, unity.", reversed: "Lack of completion, incompletion, stagnation, lack of closure, shortcuts, failure, loss, boredom, burden, laziness.", blunt: "You have successfully completed a major life cycle. This is a moment of wholeness, fulfillment, and accomplishment. Celebrate your success and the integration of all you've learned. You've earned this." }}
        ],
        wands: [
            { name: "Ace of Wands", svg: `<path d="M10 2v16 M8 4l4 4-4 4"/>`, meanings: { upright: "New beginnings, inspiration, creative spark, potential, growth, passion, taking ownership of personal power, new opportunities, swift action required.", reversed: "Delays, blocks, lack of passion or energy, creative blocks, missed opportunities, false starts, failure, uncertainty, investing energy unwisely.", blunt: "This is a spark of pure potential and passion. Seize this new opportunity with energy and take action now, or the creative fire will be wasted." }},
            { name: "Two of Wands", svg: `<path d="M6 2v16 M14 2v16 M6 6h8"/>`, meanings: { upright: "Future planning, decision-making, progress, ambition, expansion, initiative, stepping out of comfort zones, exploring new paths, aligning decisions with long-term goals.", reversed: "Indecisiveness, fear of change or the unknown, lack of planning, delayed plans, doubt, impatience, feeling stuck.", blunt: "You've had the idea, now you need to make a plan. Step out of your comfort zone and decide on your long-term goals, or stay stuck in indecision." }},
            { name: "Three of Wands", svg: `<path d="M5 2v16 M10 2v16 M15 2v16"/>`, meanings: { upright: "Expansion, foresight, looking ahead, momentum, confidence, growth, opportunities awaiting (often linked to travel/ventures), 'ships coming in,' progress.", reversed: "Restrictions, limitations, lack of progress, obstacles, delays, frustration, reassessing approach, creative vision blocked, not seeing progress made.", blunt: "Your plans are in motion. Be confident and look ahead, as the first signs of success are appearing. If reversed, your progress is blocked; re-evaluate your plans." }},
            { name: "Four of Wands", svg: `<path d="M4 2v16 M16 2v16 M4 8h12"/>`, meanings: { upright: "Celebration, harmony, stability, happy families, reunions, coming home, success, milestones, strong foundation, contentment, excitement about future.", reversed: "Conflict within families/relationships, instability, lack of harmony or support, tension, unhappiness, financial struggles, workplace conflicts.", blunt: "You've achieved a milestone worth celebrating. Enjoy the harmony and stability you've created. This is a moment of pure contentment and homecoming." }},
            { name: "Five of Wands", svg: `<path d="M2 4l16 12 M2 16l16-12 M10 2v16"/>`, meanings: { upright: "Conflict, competition, disagreements, tension, arguments, struggles, opposition from ambitious maneuvering, need for balance between personal excellence and cooperation.", reversed: "Resolution of conflict, harmony, cooperation, finding common ground, end of struggles, suppression of temper, fear of confrontation. Can also mean internal conflicts.", blunt: "This is about competition and conflict. It's a chaotic but necessary struggle of ideas and ambitions. Find a way to cooperate or get lost in the noise." }},
            { name: "Six of Wands", svg: `<path d="M10 18V6 M10 6L6 2 M10 6l4-4"/>`, meanings: { upright: "Success, victory, triumph, public recognition, praise, acclaim, rewards, achieving milestones, confidence, financial stability.", reversed: "Failure, lack of recognition or rewards, setbacks, lack of achievement, self-doubt, negativity, potential arrogance, need for self-care.", blunt: "You've earned this victory and public recognition. Enjoy the success and the confidence boost that comes with it. Don't let arrogance tarnish your triumph." }},
            { name: "Seven of Wands", svg: `<path d="M10 2v16 M4 8l6-4 6 4"/>`, meanings: { upright: "Challenge, competition, protection, perseverance, defending one's position, standing up for beliefs, determination in adversity, holding your ground.", reversed: "Exhaustion, giving up, feeling overwhelmed, lack of courage or self-belief, surrendering, compromise, losing control, seeking support, collaboration.", blunt: "You are being challenged. You must stand your ground and defend your position with courage and perseverance. Giving up now means losing everything you've worked for." }},
            { name: "Eight of Wands", svg: `<path d="M2 4l16 0 M2 8l16 0 M2 12l16 0 M2 16l16 0"/>`, meanings: { upright: "Swift action, rapid progression, forward momentum, news, communication, travel, seizing opportunities, desires moving to reality, dynamism, energy.", reversed: "Lack of speed or progress, delays, frustration, impatience, missed opportunities, unfinished business, scattered energy, going too fast without reflection.", blunt: "Things are moving very quickly. Seize the opportunity and act now. Delays or scattered energy will cause you to miss this window of rapid progress." }},
            { name: "Nine of Wands", svg: `<path d="M10 2v16 M4 4h12v12H4z"/>`, meanings: { upright: "Resilience, perseverance, determination, guarding boundaries, courage, last stand, battle-weary but not defeated, final push towards success.", reversed: "Reluctance to compromise, stubbornness, chronic fatigue, lack of courage or persistence, feeling trapped (prison of one's making), laziness, waning resolve, indefensible position.", blunt: "You're battle-weary but you're still standing. This is the final push. Use your resilience and courage to see this through to the end. Don't give up now." }},
            { name: "Ten of Wands", svg: `<path d="M4 10h12 M10 4v12 M6 6l8 8 M14 6l-8 8"/>`, meanings: { upright: "Burden, responsibility, hard work, oppression, overload, stress, completion of a demanding cycle, doing whatever it takes to finish.", reversed: "Letting go of burdens, seeking support, freedom from oppression, lack of perspective, divided attention, martyrdom, exhaustion but potential for release.", blunt: "You've taken on too much and are being crushed by the burden. It's time to either complete the cycle or delegate. Let go of some of this weight before it breaks you." }},
            { name: "Page of Wands", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">P</text>`, meanings: { upright: "Enthusiasm, exploration, fresh ideas, creativity, inspiration, adventure, cheerfulness, energetic, fearless, extroverted, new beginnings.", reversed: "Hasty, impatient, lacking ideas, tantrums, laziness, boring, unreliable, distracted, unfocused/manic state, sticking to what's known, lack of beginner's enthusiasm.", blunt: "Embrace your fearless, adventurous energy. A new, creative idea is sparking. Explore it with enthusiasm, but if reversed, stop being lazy or unreliable and actually focus." }},
            { name: "Knight of Wands", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">Kn</text>`, meanings: { upright: "Action-oriented, ambitious, passionate, adventurous, impulsive, confident, energetic, driven to succeed, ushering in positive changes.", reversed: "Restless, unfocused, impulsive, haste, scattered energy, delays, frustration, arrogance, recklessness, lack of self-discipline, fear, lack of enthusiasm.", blunt: "This is the time for ambitious, passionate action. Be adventurous and confident, but channel your energy. Reckless, scattered impulsiveness will lead to frustration and failure." }},
            { name: "Queen of Wands", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">Q</text>`, meanings: { upright: "Courage, confidence, independence, charisma, social butterfly, determination, optimism, creativity, passion, influential, supportive.", reversed: "Self-respect/confidence issues, introverted, insecurity, low self-esteem, jealousy, manipulation, phony flattery, work/home life out of balance.", blunt: "Own your confidence and charisma. Be the passionate, independent, and influential person you are. If reversed, your insecurities are showing; stop manipulating and find your self-respect." }},
            { name: "King of Wands", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">K</text>`, meanings: { upright: "Leadership, vision, authority, entrepreneurship, ambition, inspiration, confidence, determination, taking control, natural-born leader.", reversed: "Impulsiveness, haste, ruthlessness, high/unrealistic expectations, arrogance, lack of direction, breaking promises, bad example, controlling/aggressive behavior.", blunt: "You are a natural-born leader with a vision. Take control and inspire others with your determination. Avoid becoming a ruthless or impulsive tyrant with unrealistic expectations." }}
        ],
        cups: [
            { name: "Ace of Cups", svg: `<path d="M5 5h10v2a5 5 0 01-10 0V5zM10 12v6M7 18h6"/>`, meanings: { upright: "New love, emotional awakening, compassion, joy, creativity, spiritual nourishment, new relationships, outpouring of emotion, fertility.", reversed: "Emotional blockage, repressed emotions, sadness, unrequited love, spiritual depletion, end of a relationship, inability to form connections, self-love needed first.", blunt: "A new wave of emotion, love, or creativity is here. Open yourself to it. If you're blocked emotionally, you'll miss this opportunity for connection. Address your own needs first." }},
            { name: "Two of Cups", svg: `<path d="M4 2h4v4h-4z M12 2h4v4h-4z M8 8h4"/>`, meanings: { upright: "Partnership, union, mutual attraction, harmony, connection, love, shared feelings, reciprocity, emotional fulfillment, sexual relation.", reversed: "Disharmony, disconnection, imbalance in relationships, broken trust, separation, emotional distance, false love, codependency, uneven power dynamics, bad business partnerships.", blunt: "This is about a partnership built on mutual attraction and harmony. If it's imbalanced or disconnected, the partnership is failing. It requires equal give and take." }},
            { name: "Three of Cups", svg: `<path d="M2 2h4v4H2z M14 2h4v4h-4z M8 8h4v4H8z"/>`, meanings: { upright: "Celebration, friendship, community, joy, collaboration, reunions, merriment, group events, creative expression.", reversed: "Overindulgence, gossip, cancelled celebrations, loneliness, isolation, lack of social life, affairs, termination, hedonism, third-party interference, problems in a three-way friendship.", blunt: "It's time to celebrate with your community and friends. If reversed, watch out for gossip, overindulgence, or third-party interference ruining the good times." }},
            { name: "Four of Cups", svg: `<path d="M2 2h4v4H2z M8 2h4v4H8z M14 2h4v4h-4z M8 8h4v4H8z"/>`, meanings: { upright: "Apathy, contemplation, discontent, missed opportunities, withdrawal, self-absorption, stagnation, feeling unmotivated, taking things for granted.", reversed: "Interest, focus, self-awareness, gratitude, seizing opportunities, letting go of regret, end of stagnation, motivation, enthusiasm, proactive, new start.", blunt: "You're so absorbed in your discontent that you're missing a real opportunity being offered to you. Snap out of your apathy and see what's right in front of you." }},
            { name: "Five of Cups", svg: `<path d="M2 14h4v4H2z M8 14h4v4H8z M14 2h4v4h-4z"/>`, meanings: { upright: "Loss, grief, disappointment, regret, sadness, mourning, discontent, focusing on what's lost rather than what remains, self-pity.", reversed: "Acceptance, moving on, finding peace, contentment, seeing positives, healing, forgiveness, emotional recovery, letting go of past grief.", blunt: "Stop focusing on what you've lost. Grieve your disappointments, but then turn around and see what you still have. Wallowing in regret is a choice." }},
            { name: "Six of Cups", svg: `<path d="M5 2h4v4H5z M11 2h4v4h-4z M5 8h4v4H5z M11 8h4v4h-4z M2 14h4v4H2z M14 14h4v4h-4z"/>`, meanings: { upright: "Nostalgia, childhood memories, innocence, reunion, kindness, comfort of the past, generosity, sharing, simple joys.", reversed: "Clinging to the past, inability to move on, rose-tinted view of the past, boredom, stagnation, need to embrace maturity and independence, unresolved childhood issues.", blunt: "This is about the comfort and simple joys of the past, possibly a reunion. Enjoy the nostalgia, but don't get stuck there. It's time to move on and mature." }},
            { name: "Seven of Cups", svg: `<circle cx="10" cy="10" r="2"/><path d="M10 8V2 M10 12v6 M8 10H2 M12 10h6 M7 7l-4-4 M13 7l4-4 M7 13l-4 4 M13 13l4 4"/>`, meanings: { upright: "Choices, options, illusions, fantasy, daydreaming, wishful thinking, temptation, indecision, needing to assess options realistically.", reversed: "Clarity, making choices, facing reality, lack of purpose, disarray, confusion, diversion, distractions, cutting out illusions, missed opportunities.", blunt: "You're faced with many choices, but most are just fantasies. Stop daydreaming and make a decision based on reality, not wishful thinking, or you'll end up with nothing." }},
            { name: "Eight of Cups", svg: `<path d="M2 18h16 M10 14V4 M6 10l-4 4 M14 10l4 4"/>`, meanings: { upright: "Walking away, abandonment, disillusionment, escapism, seeking deeper meaning, transition, introspection, courage to leave the familiar for something more fulfilling.", reversed: "Resistance to change, stagnation, fear of the unknown, clinging to the past or unfulfilling situations, emotional avoidance, complacency, monotony.", blunt: "What you have is no longer emotionally fulfilling. It's time to walk away and seek something deeper. Staying out of fear or complacency is a dead end." }},
            { name: "Nine of Cups", svg: `<circle cx="10" cy="6" r="4"/><path d="M2 14h16v4H2z"/>`, meanings: { upright: "Wishes fulfilled, contentment, satisfaction, emotional abundance, pleasure, success, achievements, recognition, Law of Attraction working. Often called the 'wish card.'", reversed: "Unfulfilled desires, dissatisfaction, materialism, arrogance, snobbery, disappointment, underachievement, inner work needed, dream job not as expected.", blunt: "You're getting what you wished for. This is the 'wish card,' so enjoy the contentment and satisfaction. If reversed, your desire was superficial and won't bring true happiness." }},
            { name: "Ten of Cups", svg: `<path d="M2 10 A8 8 0 0 1 18 10 M4 2h12 M6 6h8"/>`, meanings: { upright: "Lasting happiness, family harmony, emotional fulfillment, divine love, reunions, stability, security, domestic bliss, 'happily ever after'.", reversed: "Broken family, conflict, despair, unhappy home, separation, domestic conflict, disharmony, isolation, unrealistic expectations of family life.", blunt: "This is the 'happily ever after' card representing domestic bliss and emotional fulfillment. Cherish it. If reversed, your family life is in conflict and your expectations are unrealistic." }},
            { name: "Page of Cups", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">P</text>`, meanings: { upright: "Creative opportunities, intuition, sensitivity, messenger of emotions, new feelings, romantic proposals, good news, embracing youthfulness, inner child.", reversed: "Immaturity, emotional vulnerability, creative blocks, broken dreams, envy, bad news, insecurity, promiscuity, seeking love in wrong places, doubt.", blunt: "Be open to new feelings and creative messages. Your intuition is speaking to you. If you're being emotionally immature or insecure, you're blocking this positive news." }},
            { name: "Knight of Cups", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">Kn</text>`, meanings: { upright: "Romance, charm, imagination, artistic pursuits, following the heart, proposals, invitations, idealist, graceful, diplomatic, messenger of love.", reversed: "Emotional immaturity, moodiness, disappointment, tantrums, turmoil, avoiding conflict, vanity, unrequited love, heartbreak, creative blockages, passive-aggressive behavior, empty promises.", blunt: "Follow your heart and chase that romantic or artistic ideal. But be warned, this is about charm and imagination, which can easily turn into moodiness and unrealistic promises if not grounded." }},
            { name: "Queen of Cups", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">Q</text>`, meanings: { upright: "Compassion, intuition, emotional security, empathy, nurturing, kindness, love, romance, loyalty, good mother figure, healing, supportive.", reversed: "Emotional immaturity, insecurity, lack of trust, neediness, oversensitivity, self-centeredness, smothering, blocked intuition, repressed creativity, disloyalty.", blunt: "Lead with compassion and intuition. Your emotional security is your strength. If you find yourself being needy, insecure, or oversensitive, you are not embodying your power." }},
            { name: "King of Cups", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">K</text>`, meanings: { upright: "Emotional balance and control, wisdom, diplomacy, compassion, tolerance, maturity, loyalty, devotion, spiritual guidance, understanding feelings.", reversed: "Emotional immaturity or instability, manipulation, control, moodiness, withdrawal, deception, coldness, depression, selfishness, anxiety, repressed emotions.", blunt: "Master your emotions. True power comes from emotional balance and control, not manipulation or moodiness. Be the wise, diplomatic leader, not a selfish, unstable tyrant." }}
        ],
        swords: [
            { name: "Ace of Swords", svg: `<path d="M10 2v16 M6 14h8"/>`, meanings: { upright: "Breakthroughs, new ideas, mental clarity, success, truth, vision, new beginnings (especially intellectual), focus, victory, justice.", reversed: "Inner clarity emerging, re-thinking an idea, clouded judgment, confusion, poor communication, hostility, arguments, creative blocks, frustration, unfairness.", blunt: "This is a breakthrough of pure, cutting truth. Use this moment of mental clarity to achieve victory. If reversed, your judgment is clouded and you need to rethink everything." }},
            { name: "Two of Swords", svg: `<path d="M2 2l16 16 M2 16l16-16"/>`, meanings: { upright: "Indecision, stalemate, difficult choices, blocked emotions, truce, resistance, facing concerns, divided allegiance, needing to weigh options. The blindfolded figure often represents a deliberate choice to block out distractions.", reversed: "Indecision leading to anxiety or stress, emotional or mental upheaval, realizing the truth, debunking lies, disruptions, cancellations, being too cautious, anger.", blunt: "You're in a stalemate because you're willfully avoiding a difficult choice. Stop blindfolding yourself to the truth and make a decision, or the anxiety will consume you." }},
            { name: "Three of Swords", svg: `<path d="M10 4 L4 10 h12z M10 4v14"/>`, meanings: { upright: "Heartbreak, emotional pain, sorrow, grief, hurt, disappointment, painful words or actions, betrayal, separation.", reversed: "Releasing pain, optimism, forgiveness (especially self-forgiveness), recovery, negative self-talk, hypersensitivity, difficulty moving on from past hurt.", blunt: "This is pure heartbreak and painful sorrow. It's necessary to experience this hurt to move on. Releasing the pain requires forgiveness, not just dwelling in negative self-talk." }},
            { name: "Four of Swords", svg: `<path d="M2 18h16 M10 14V4 M6 10l-4 4 M14 10l4 4"/>`, meanings: { upright: "Rest, relaxation, meditation, contemplation, recuperation, recovery, taking a break from challenges, solitude, temporary peace, planning for the future.", reversed: "Exhaustion, burnout, restlessness, lack of sleep or poor sleep, stagnation, lack of relaxation, needing to rest but not doing so, or awakening and recovery after rest.", blunt: "You need to rest. Take a break from the challenges and recuperate. Pushing through will only lead to exhaustion and burnout. This is non-negotiable." }},
            { name: "Five of Swords", svg: `<path d="M10 2v16 M4 8l6-4 6 4 M4 14l6-4 6 4"/>`, meanings: { upright: "Conflict, defeat, ambition at others' expense, bullying, intimidation, hostility, stress, arguments, disputes, hollow victory, needing to pick battles.", reversed: "Reconciliation, resolution, compromise, moving forward, overcoming challenges, peaceful resolution, regret, remorse, cutting losses, or escalation of violence/revenge.", blunt: "You might win this conflict, but it will be a hollow victory that comes at a great cost. Pick your battles wisely. Sometimes reconciliation is the greater strength." }},
            { name: "Six of Swords", svg: `<path d="M4 14h12 M10 14V4 M6 10l-4 4 M14 10l4 4"/>`, meanings: { upright: "Transition, change, rite of passage, moving on from difficulties, releasing baggage, healing, progress, escape, finding calmer waters.", reversed: "Feeling trapped, slow healing, lack of progress, resistance to change, unfinished business, feeling overwhelmed, turbulence, obstacles.", blunt: "It's time to move on from a difficult situation. This is a transition to calmer waters, even if it feels sad. Release the baggage and find peace. Don't stay trapped." }},
            { name: "Seven of Swords", svg: `<path d="M10 2v10 M4 8l6-4 6 4 M4 14h12"/>`, meanings: { upright: "Deception, trickery, strategy, stealth, betrayal, theft, cunning, getting away with something, dishonesty, manipulation, resourcefulness.", reversed: "Confession, conscience, regret, truth revealed, coming clean, maliciousness, taking responsibility, starting fresh, or tactics not working.", blunt: "There is deception and trickery afoot. Whether it's you or someone else, this dishonesty will not end well. It's time to come clean and take responsibility." }},
            { name: "Eight of Swords", svg: `<path d="M10 2v16 M2 6h16 M2 14h16"/>`, meanings: { upright: "Restriction, self-imposed limitation, victim mentality, feeling trapped, powerlessness, negative thoughts, imprisonment by own beliefs.", reversed: "Releasing self-limiting beliefs, finding freedom, empowerment, open to new perspectives, overcoming obstacles, inner critic, releasing negative thoughts.", blunt: "You feel trapped, but it's a prison of your own mind. Your limitations are self-imposed. You have the power to free yourself by releasing your negative beliefs." }},
            { name: "Nine of Swords", svg: `<path d="M10 18A8 8 0 0 0 10 2 M2 10h16"/>`, meanings: { upright: "Anxiety, worry, fear, depression, nightmares, despair, breaking point, isolation, negative thoughts weighing heavily.", reversed: "Inner turmoil, deep-seated fears, secrets, releasing worry, recovery, learning to cope, facing life, finding help, shame, guilt, mental health issues, situation may be better or worse than it seems.", blunt: "You are at a breaking point, consumed by anxiety and fear. These nightmares are born from your own thoughts. It's time to face your deep-seated fears and seek help." }},
            { name: "Ten of Swords", svg: `<path d="M10 2v16 M2 10h16 M5 5l10 10 M5 15l10-10"/>`, meanings: { upright: "Painful endings, deep wounds, betrayal, loss, crisis, rock bottom, ruin, finality, being stabbed in the back.", reversed: "Recovery, regeneration, resisting an inevitable end, survival, healing after loss, learning from pain, light returning after darkness, accepting reality.", blunt: "This is rock bottom. A painful, final ending. There is no going back. Resisting this will only prolong the agony. Accept the loss so you can begin to recover." }},
            { name: "Page of Swords", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">P</text>`, meanings: { upright: "Curiosity, new ideas, thirst for knowledge, truth-seeking, vigilance, communicative but scattered energy, creative ideas, planning, protective/guarded nature, quick-witted communication.", reversed: "Self-expression held back, all talk and no action, haphazard action, haste, lack of focus, defensive attitudes, potential for disappointments, annoying others with constant questions.", blunt: "You're full of curious energy and new ideas. Seek the truth with vigilance, but don't just talk about it. Haphazard action without focus will lead to disappointment." }},
            { name: "Knight of Swords", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">Kn</text>`, meanings: { upright: "Ambitious, action-oriented, driven to succeed, fast-thinking, assertive, direct, impatient, intellectual, daring, focused, perfectionist.", reversed: "Restless, unfocused, impulsive, burn-out, rude, tactless, forceful, bully, aggressive, vicious, ruthless, arrogant, scattered thoughts, making rash decisions.", blunt: "Charge forward with ambitious, fast-thinking action. Be assertive and direct to succeed. But if you become ruthless, tactless, and unfocused, you're just a bully heading for burnout." }},
            { name: "Queen of Swords", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">Q</text>`, meanings: { upright: "Independent, clear-minded, perceptive, honest, fair, objective, constructive criticism, wise feminine intellect, setting boundaries, direct communication.", reversed: "Pessimistic, malicious, manipulative, harsh, bitter, spiteful, cruel, deceitful, unforgiving, emotional imbalance, lack of empathy, gossip, repressed trauma.", blunt: "Use your clear-minded independence to communicate honestly and set firm boundaries. Your objectivity is a strength. Avoid becoming a bitter, manipulative person who uses words to hurt others." }},
            { name: "King of Swords", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">K</text>`, meanings: { upright: "Intellectual authority, truth, logic, ethical judgment, mental clarity, decisiveness, structure, routine, fairness, high standards, serious, strict.", reversed: "Misuse of power, manipulation, irrationality, quiet power, inner truth (can be positive if about inner alignment), dictator, oppressive, inhumane, controlling, cold, ruthless, dishonest, angry outbursts.", blunt: "You are the intellectual authority here. Use your logic and mental clarity to make fair, ethical, and decisive judgments. Do not become a manipulative and oppressive tyrant." }}
        ],
        pentacles: [
            { name: "Ace of Pentacles", svg: `<circle cx="10" cy="10" r="4" fill="none"/>`, meanings: { upright: "New opportunities (financial/material), manifestation, prosperity, abundance, security, stability, resources, new job or investment.", reversed: "Missed chances, scarcity, deficiency, instability, insecurity, poor financial management, financial delays, excessive expenditure, greed, bad investments.", blunt: "A tangible new opportunity for prosperity is here. This is the seed of manifestation. Don't miss this chance through poor planning or financial insecurity." }},
            { name: "Two of Pentacles", svg: `<path d="M6 6a4 4 0 100 8 M14 6a4 4 0 110 8 M3 10h14"/>`, meanings: { upright: "Balancing resources, adaptability, juggling priorities, managing change, flexibility, time management, coping with demands.", reversed: "Overcommitment, disorganization, imbalance, lack of planning, financial instability, poor financial decisions, neglecting self-care, recognizing need for change.", blunt: "You are juggling priorities, probably financial ones. You must be adaptable and flexible. If you are disorganized and overcommitted, you will fail." }},
            { name: "Three of Pentacles", svg: `<path d="M10 4L4 10h12z M8 12h4v4H8z"/>`, meanings: { upright: "Teamwork, collaboration, shared goals, apprenticeship, effort, pooling energy, skill, craftsmanship, high standards, diligence, recognition, learning.", reversed: "Lack of cohesion or teamwork, apathy, poor motivation, conflict, ego, competition, mediocre work, lack of direction, inexperience, feeling underestimated, thankless job.", blunt: "Success will come through teamwork and collaboration. Your skills will be recognized if you can work with others. Apathy and ego will lead to mediocre work." }},
            { name: "Four of Pentacles", svg: `<rect x="3" y="3" width="6" height="6" fill="none"/><rect x="11" y="3" width="6" height="6" fill="none"/><rect x="3" y="11" width="6" height="6" fill="none"/><rect x="11" y="11" width="6" height="6" fill="none"/>`, meanings: { upright: "Conservation, security, possessiveness, control, stability, saving money, frugality, boundaries, guardedness, materialism.", reversed: "Letting go, generosity, spending, openness, financial insecurity or instability, reckless spending, releasing grip on materialism, overspending.", blunt: "You are holding on too tightly to your material security, which is blocking growth. It's time to let go of that possessiveness. If reversed, your reckless spending is creating instability." }},
            { name: "Five of Pentacles", svg: `<path d="M10 2L4 8h12z M8 10h4v8H8z"/>`, meanings: { upright: "Hardship, financial loss, poverty, isolation, feeling abandoned or left out in the cold, adversity, struggle, unemployment, alienation, disgrace, lack mindset.", reversed: "Positive changes, recovery from loss (financial or otherwise), overcoming adversity, forgiveness, feeling welcomed, end to challenging circumstances, spiritual poverty.", blunt: "You are experiencing financial hardship and isolation. Stop feeling abandoned and look for the help that is available. Recovery is possible, but you must overcome your lack mindset." }},
            { name: "Six of Pentacles", svg: `<circle cx="10" cy="6" r="4" fill="none"/><path d="M2 14h16 M10 10v8"/>`, meanings: { upright: "Generosity, charity, community, material help, support, sharing, giving and receiving, gratitude, fairness in financial exchange, loans.", reversed: "Power dynamics, abuse of generosity, strings attached gifts, inequality, extortion, debt, lack of confidence in abilities, devaluing oneself, one-sided giving.", blunt: "This is about the fair exchange of resources. Be generous if you can, be grateful if you receive. If the exchange is unequal, with strings attached, it's not generosity, it's extortion." }},
            { name: "Seven of Pentacles", svg: `<path d="M2 18h16 M10 14V4 M6 10l-4 4 M14 10l4 4"/>`, meanings: { upright: "Patience, investment, long-term view, perseverance, assessing progress, harvest, rewards for effort, growth, planning, taking stock.", reversed: "Unfinished work, procrastination, low effort, waste, lack of growth or reward, setbacks, impatience, scattered efforts, unrealistic expectations, knowing when to quit.", blunt: "You've invested your effort, now have the patience to wait for the results. Assess your progress, but don't get impatient. Your long-term view will be rewarded if you don't procrastinate." }},
            { name: "Eight of Pentacles", svg: `<circle cx="6" cy="6" r="2" fill="none"/><circle cx="14" cy="6" r="2" fill="none"/><circle cx="6" cy="14" r="2" fill="none"/><circle cx="14" cy="14" r="2" fill="none"/>`, meanings: { upright: "Apprenticeship, skill development, dedication, craftsmanship, diligence, meticulousness, hard work, commitment, mastery, high standards, accomplishment.", reversed: "Lack of quality, rushed job, bad reputation, lack of motivation or focus, mediocrity, laziness, low skill, dead-end job, perfectionism hindering progress, workaholism.", blunt: "Dedicate yourself to mastering your craft. Diligent, meticulous hard work is required. Rushed jobs and laziness will only lead to mediocrity and a bad reputation." }},
            { name: "Nine of Pentacles", svg: `<circle cx="10" cy="10" r="8"/><circle cx="10" cy="10" r="4"/>`, meanings: { upright: "Self-sufficiency, abundance, independence, luxury, material security, rewards of labor, success, achievement, leisure, enjoying fruits of labor.", reversed: "Being guarded, living beyond means, material instability, reckless spending, superficiality, lack of confidence, low self-worth, financial irresponsibility, dishonesty in relationship for gain, setbacks due to lack of effort.", blunt: "You have achieved self-sufficient abundance through your own work. Enjoy the luxury and leisure you've earned. But don't become superficial or irresponsible with your wealth." }},
            { name: "Ten of Pentacles", svg: `<circle cx="10" cy="10" r="8"/><circle cx="10" cy="10" r="4"/><circle cx="10" cy="10" r="1"/>`, meanings: { upright: "Lasting happiness, family harmony, emotional fulfillment, divine love, reunions, stability, security, domestic bliss, 'happily ever after'.", reversed: "Broken family, conflict, despair, unhappy home, separation, domestic conflict, disharmony, isolation, unrealistic expectations of family life.", blunt: "This is about long-term wealth, family, and legacy. You're building something stable and secure that will last for generations. Financial conflict or instability threatens this entire structure." }},
            { name: "Page of Pentacles", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">P</text>`, meanings: { upright: "New opportunities for manifestation. This is a time to be a diligent student, applying yourself to a new job, project, or course of study to achieve tangible results.", reversed: "Missed opportunities or procrastination. You are not applying yourself to your goals, leading to a lack of progress and unfulfilled potential.", blunt: "A new opportunity to manifest something real is here. Be a diligent student and apply yourself. Procrastination or lack of effort will mean this chance is wasted." }},
            { name: "Knight of Pentacles", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">Kn</text>`, meanings: { upright: "Hard work, routine, and a slow and steady approach. Success will come through diligence and reliability, not through shortcuts.", reversed: "Stagnation and laziness. You are stuck in a boring routine and lack the motivation to work towards your goals, leading to frustration.", blunt: "This is a marathon, not a sprint. Be reliable and diligent. The slow and steady approach will win, but if you get stuck in a lazy, boring routine, you'll go nowhere." }},
            { name: "Queen of Pentacles", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">Q</text>`, meanings: { upright: "Nurturing practicality and providing security. You are focused on creating a comfortable and stable home environment for yourself and your loved ones.", reversed: "Work-life imbalance or financial insecurity. You may be smothering others with your care or neglecting your own needs for the sake of material security.", blunt: "Focus on creating a stable, nurturing, and secure material world for yourself and others. If your work-life is out of balance or you're neglecting your own needs, your security is an illusion." }},
            { name: "King of Pentacles", svg: `<text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" font-family="Cinzel">K</text>`, meanings: { upright: "Abundance, mastery of the material world, and success. You are a confident and reliable leader who has built a prosperous empire through hard work and wisdom.", reversed: "Greed and materialism. You may be overly focused on wealth and status, or making reckless financial decisions that risk your security.", blunt: "You have achieved mastery of the material world. You are a successful and abundant leader. Enjoy your empire, but do not let greed and reckless materialism risk everything you've built." }}
        ]
    };

    // --- SPREAD DEFINITIONS ---
    const spreads = [
        { name: "Shadow Work", positions: ["Trigger", "Hidden Fear", "Root Cause", "How to Heal"], keywords: ["shadow work", "trigger", "hidden fear", "root cause", "heal", "breakup", "trauma", "self-sabotage", "why do i keep"] },
        { name: "Career Direction", positions: ["Current Path", "Strengths", "Weaknesses", "Hidden Opportunity", "Outcome"], keywords: ["career", "job", "promotion", "my path", "current role", "vocation"] },
        { name: "Situation – Action – Outcome", positions: ["Situation", "Action", "Outcome"], keywords: ["what should i do", "how should i", "what to do", "advice", "strategic", "interview", "navigate conflict"] },
        { name: "You – Them – The Relationship", positions: ["You", "Them", "The Relationship"], keywords: ["relationship with", "what do they think", "he thinks", "she thinks", "they think", "dating", "partnership", "motives"] },
        { name: "Mind – Body – Spirit", positions: ["Mind", "Body", "Spirit"], keywords: ["burnout", "burnt out", "stress", "feeling lost", "unmotivated", "disconnected", "wellness", "alignment"] },
        { name: "Obstacle – Advice – Likely Outcome", positions: ["Obstacle", "Advice", "Likely Outcome"], keywords: ["obstacle", "challenge", "block", "stuck", "stagnation", "problem"] },
        { name: "What You Want – What You Need – What You’ll Get", positions: ["What You Want", "What You Need", "What You’ll Get"], keywords: ["what do i want", "what do i need", "goals", "aspirations", "expectations"] },
        { name: "Internal – External – Path Forward", positions: ["Internal", "External", "Path Forward"], keywords: ["is it me", "in my head", "confusion", "mixed signals", "overwhelm", "i feel"] },
        { name: "Past – Present – Future", positions: ["Past", "Present", "Future"], keywords: ["how did", "where is this going", "progression", "timeline", "dynamics"] } // Default-like spread
    ];

    // --- APPLICATION STATE AND DOM ELEMENTS ---
    let currentDeck = null;
    let originalQuestion = "";
    let drawnCards = [];
    let gameState = 'asking'; // asking | reading

    // Screen Elements
    const deckSelectionScreen = document.getElementById('deck-selection-screen');
    const readingChamberScreen = document.getElementById('reading-chamber-screen');
    
    // Reading Elements
    const cardDisplay = document.getElementById('card-display');
    const spreadNameEl = document.getElementById('spread-name');
    const interpretationTextEl = document.getElementById('interpretation-text');
    const finalMessageArea = document.getElementById('final-message-area');
    const finalBluntMessageEl = document.getElementById('final-blunt-message');
    
    // Chat Elements
    const chatForm = document.getElementById('chat-form');
    const userInput = document.getElementById('user-input');
    const chatLog = document.getElementById('chat-log');
    const submitButton = document.getElementById('submit-button');

    // --- CORE LOGIC ---
    function buildDeck(deckData) {
        const fullDeck = [];
        ['major', 'wands', 'cups', 'swords', 'pentacles'].forEach(category => {
            deckData[category].forEach(card => {
                fullDeck.push({ ...card });
            });
        });
        return fullDeck;
    }


    function selectDeck(deckName) {
        const builtDeck = buildDeck(fullDeckData);

        currentDeck = {
            name: deckName === 'goldFoil' ? 'Greco-Roman Tarot' : 'Demonic Tarot',
            class: deckName,
            cards: builtDeck
        };
        
        // Process SVGs for the selected deck style
        currentDeck.cards.forEach(card => {
             const strokeColor = deckName === 'goldFoil' ? 'var(--color-primary)' : 'var(--color-secondary)';
             let finalSvg = card.svg.replace(/<path/g, `<path stroke="${strokeColor}" stroke-width="1.5" fill="none"`);
             finalSvg = finalSvg.replace(/<circle/g, `<circle stroke="${strokeColor}" stroke-width="1.5" fill="none"`);
             finalSvg = finalSvg.replace(/<rect/g, `<rect stroke="${strokeColor}" stroke-width="1.5" fill="none"`);
             finalSvg = finalSvg.replace(/<text/g, `<text fill="${strokeColor}"`);
             card.svg = finalSvg;
        });

        deckSelectionScreen.style.display = 'none';
        readingChamberScreen.style.display = 'block';
        submitButton.style.backgroundColor = (deckName === 'goldFoil') ? 'var(--color-primary)' : 'var(--color-secondary)';
        userInput.style.borderColor = (deckName === 'goldFoil') ? '' : '#444';
        userInput.addEventListener('focus', () => {
             userInput.style.borderColor = (deckName === 'goldFoil') ? 'var(--color-primary)' : 'var(--color-secondary)';
        });
        userInput.addEventListener('blur', () => {
             userInput.style.borderColor = '#444';
        });
        
        addMessageToLog('oracle', `You have chosen the ${currentDeck.name}. The cards are shuffled. Focus your mind. What do you wish to know?`);
    }

    chatForm.addEventListener('submit', function(event) {
        event.preventDefault();
        const question = userInput.value.trim();
        if (question === '') return;

        addMessageToLog('user', question);
        userInput.value = '';
        
        const lowerCaseQuestion = question.toLowerCase();
        if (lowerCaseQuestion === 'reset' || lowerCaseQuestion === 'shuffle') {
            resetForNewReading();
            return;
        }

        if (gameState === 'asking') {
            originalQuestion = question;
            drawnCards = []; // Reset drawn cards for a new question thread
        }

        performReading(question);
    });

    function performReading(currentQuestion) {
        const spread = analyzeQuestion(currentQuestion);
        const numCardsToDraw = spread.positions.length;
        
        submitButton.disabled = true;
        userInput.placeholder = "The oracle is concentrating...";
        finalMessageArea.style.display = 'none';


        const availableCards = currentDeck.cards.filter(card => !drawnCards.map(c => c.name).includes(card.name));
        
        if (availableCards.length < numCardsToDraw) {
            addMessageToLog('oracle', `There are not enough cards left for a full ${numCardsToDraw}-card reading. Please type <strong>'reset'</strong> or <strong>'shuffle'</strong> to begin a new session.`);
            submitButton.disabled = false;
            userInput.placeholder = 'Type "reset" to begin...';
            return;
        }
        
        if (availableCards.length < (numCardsToDraw + 3) && gameState === 'reading') {
            addMessageToLog('oracle', `The deck is running low. You may want to <strong>'reset'</strong> soon for a fresh reading.`);
        }

        gameState = 'reading';
        
        const newlyDrawnCards = drawCards(availableCards, numCardsToDraw);
        drawnCards.push(...newlyDrawnCards); // Add new cards to the session's history
        
        displayCards(newlyDrawnCards, spread);
        
        interpretationTextEl.innerHTML = '';
        
        newlyDrawnCards.forEach((card, index) => {
            const interp = getLocalInterpretation(card);
            const p = document.createElement('p');
            p.innerHTML = `<strong>${spread.positions[index]} (${card.name} ${card.isReversed ? '(R)' : ''}):</strong> ${interp}`;
            interpretationTextEl.appendChild(p);
        });

        finalBluntMessageEl.innerHTML = getFinalBluntMessage(newlyDrawnCards);
        finalMessageArea.style.display = 'block';
        
        submitButton.disabled = false;
        userInput.placeholder = 'Ask a follow-up or type "reset"...';
        submitButton.textContent = 'Follow-up';
        addMessageToLog('oracle', "The cards have spoken. Ask a follow-up question for deeper insight, or type <strong>'reset'</strong> to clear the board.");
    }
    
    function analyzeQuestion(question) {
        const q = question.toLowerCase();
        for (const spread of spreads) {
            for (const keyword of spread.keywords) {
                if (q.includes(keyword)) {
                    return spread;
                }
            }
        }
        return spreads.find(s => s.name === "Past – Present – Future"); // Default
    }

    function drawCards(availableCards, numCards) {
        const deckCopy = [...availableCards];
        const drawn = [];
        for (let i = 0; i < numCards; i++) {
            if (deckCopy.length === 0) break;
            const randomIndex = Math.floor(Math.random() * deckCopy.length);
            const card = deckCopy.splice(randomIndex, 1)[0];
            card.isReversed = Math.random() < 0.5; // 50% chance of being reversed
            drawn.push(card);
        }
        return drawn;
    }
    
    function getLocalInterpretation(card) {
        const meaning = card.isReversed ? card.meanings.reversed : card.meanings.upright;
        const bluntAdvice = card.meanings.blunt;
        
        return `${meaning}<span class="blunt-advice ${currentDeck.class}"><strong>Blunt Advice:</strong> ${bluntAdvice}</span>`;
    }

    function getFinalBluntMessage(cards) {
        const suitCounts = { wands: 0, cups: 0, swords: 0, pentacles: 0, major: 0 };
        let reversedCount = 0;
        
        cards.forEach(card => {
            if (card.isReversed) {
                reversedCount++;
            }
            if (fullDeckData.major.find(c => c.name === card.name)) {
                suitCounts.major++;
            } else if (fullDeckData.wands.find(c => c.name === card.name)) {
                suitCounts.wands++;
            } else if (fullDeckData.cups.find(c => c.name === card.name)) {
                suitCounts.cups++;
            } else if (fullDeckData.swords.find(c => c.name === card.name)) {
                suitCounts.swords++;
            } else if (fullDeckData.pentacles.find(c => c.name === card.name)) {
                suitCounts.pentacles++;
            }
        });

        const dominantSuit = Object.keys(suitCounts).reduce((a, b) => suitCounts[a] > suitCounts[b] ? a : b);

        if (reversedCount >= cards.length / 2 && cards.length > 1) {
            return "There's significant blockage or resistance here. You are fighting the natural flow, or you need to look inward to resolve a deep-seated issue before you can move forward. Stop resisting and start reflecting.";
        }
        if (suitCounts.major >= cards.length / 2 && suitCounts.major > 1) {
            return "This is a major life event. The universe is screaming at you to pay attention. These are not everyday issues; you are at a crossroads. The decisions you make now will have long-lasting consequences. Don't treat this lightly.";
        }

        switch(dominantSuit) {
            case 'wands':
                return "The core of this issue is about action and ambition. Stop thinking and start doing. Your passion and energy are the keys to moving forward, but be careful not to let your impulsiveness lead to burnout.";
            case 'cups':
                return "This is all about your emotions and relationships. Logic is not your friend right now. You need to listen to your heart and your intuition. The answer lies in how you truly feel, not what you think you should feel.";
            case 'swords':
                return "The heart of this matter is conflict, truth, and difficult decisions. You cannot avoid the harsh reality. It's time to be brutally honest with yourself and others. A sharp truth is better than a comforting lie.";
            case 'pentacles':
                return "This all comes down to the material world: your job, your finances, your home. You need to be practical and grounded. Make a plan, do the work, and focus on building a stable foundation. This is not about dreams; it's about reality.";
            default:
                return "The reading is complex, with energies pulling in multiple directions. You must find balance between your thoughts, feelings, and actions to navigate this situation successfully. There is no single, easy answer here."
        }
    }


    function displayCards(cards, spread) {
        cardDisplay.innerHTML = '';
        interpretationTextEl.innerHTML = '';
        spreadNameEl.textContent = spread.name;

        cards.forEach((card, index) => {
            const container = document.createElement('div');
            container.className = `tarot-card-container ${card.isReversed ? 'reversed' : ''}`;
            container.style.animationDelay = `${index * 0.2}s`;

            container.innerHTML = `
                <div class="tarot-card">
                    <div class="card-face card-face-back ${currentDeck.class}"></div>
                    <div class="card-face card-face-front ${currentDeck.class}">
                        <div class="card-name">${card.name} ${card.isReversed ? '(R)' : ''}</div>
                        <div class="card-visual">
                            <svg viewBox="0 0 20 20" preserveAspectRatio="xMidYMid meet">${card.svg}</svg>
                        </div>
                        <div class="card-position">${spread.positions[index]}</div>
                    </div>
                </div>
            `;
            cardDisplay.appendChild(container);
            
            setTimeout(() => {
                container.classList.add('flipped');
            }, (index + 1) * 200 + 100);
        });
    }

    function resetForNewReading() {
        gameState = 'asking';
        drawnCards = [];
        originalQuestion = "";
        
        cardDisplay.innerHTML = '';
        interpretationTextEl.innerHTML = '';
        spreadNameEl.textContent = '';
        finalMessageArea.style.display = 'none';
        
        userInput.placeholder = 'Ask a new question...';
        submitButton.textContent = 'Ask';
        
        addMessageToLog('oracle', 'The deck has been reshuffled. The energies are reset. Ask a new question when you are ready.');
    }
    
    function addMessageToLog(sender, text) {
        const messageEl = document.createElement('div');
        messageEl.classList.add('chat-message', `${sender}-message`);
        messageEl.innerHTML = text;
        chatLog.appendChild(messageEl);
        chatLog.scrollTop = chatLog.scrollHeight;
    }

    </script>
</body>
</html>
